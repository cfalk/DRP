## Using the app from inside a script
import os

os.environ['DJANGO_SETTINGS_MODULE'] = 'DRP.settings'
import django

django.setup()

from DRP import settings
from django.core.management.base import BaseCommand
from django import db
from django.conf import settings
import logging
import importlib
from django.db import transaction
from DRP.models import PerformedReaction, Descriptor, NumRxnDescriptorValue, Compound, Reaction, CompoundQuantity


## the recommended base descriptors
rec_descs = ["C_mols","Cr_mols","Ga_mols","H_mols","I_mols","Inorg_amount_molarity","Inorg_boolean_group_10_DRP_1_5_False_molarity","Inorg_boolean_group_11_DRP_1_5_False_molarity","Inorg_boolean_group_12_DRP_1_5_any","Inorg_boolean_group_12_DRP_1_5_False_molarity","Inorg_boolean_group_13_DRP_1_5_any","Inorg_boolean_group_13_DRP_1_5_False_count","Inorg_boolean_group_13_DRP_1_5_False_molarity","Inorg_boolean_group_13_DRP_1_5_True_count","Inorg_boolean_group_13_DRP_1_5_True_molarity","Inorg_boolean_group_14_DRP_1_5_any","Inorg_boolean_group_14_DRP_1_5_False_molarity","Inorg_boolean_group_14_DRP_1_5_True_count","Inorg_boolean_group_15_DRP_1_5_any","Inorg_boolean_group_15_DRP_1_5_False_molarity","Inorg_boolean_group_16_DRP_1_5_True_molarity","Inorg_boolean_group_17_DRP_1_5_any","Inorg_boolean_group_17_DRP_1_5_False_molarity","Inorg_boolean_group_18_DRP_1_5_False_molarity","Inorg_boolean_group_1_DRP_1_5_any","Inorg_boolean_group_1_DRP_1_5_False_count","Inorg_boolean_group_1_DRP_1_5_False_molarity","Inorg_boolean_group_1_DRP_1_5_True_count","Inorg_boolean_group_1_DRP_1_5_True_molarity","Inorg_boolean_group_2_DRP_1_5_False_molarity","Inorg_boolean_group_3_DRP_1_5_False_molarity","Inorg_boolean_group_4_DRP_1_5_False_molarity","Inorg_boolean_group_5_DRP_1_5_any","Inorg_boolean_group_5_DRP_1_5_False_count","Inorg_boolean_group_5_DRP_1_5_False_molarity","Inorg_boolean_group_5_DRP_1_5_True_molarity","Inorg_boolean_group_6_DRP_1_5_any","Inorg_boolean_group_6_DRP_1_5_False_count","Inorg_boolean_group_6_DRP_1_5_False_molarity","Inorg_boolean_group_7_DRP_1_5_False_molarity","Inorg_boolean_group_8_DRP_1_5_False_molarity","Inorg_boolean_group_9_DRP_1_5_any","Inorg_boolean_group_9_DRP_1_5_False_molarity","Inorg_boolean_period_1_DRP_1_5_any","Inorg_boolean_period_1_DRP_1_5_False_molarity","Inorg_boolean_period_2_DRP_1_5_True_molarity","Inorg_boolean_period_3_DRP_1_5_any","Inorg_boolean_period_3_DRP_1_5_False_count","Inorg_boolean_period_3_DRP_1_5_False_molarity","Inorg_boolean_period_3_DRP_1_5_True_count","Inorg_boolean_period_3_DRP_1_5_True_molarity","Inorg_boolean_period_4_DRP_1_5_any","Inorg_boolean_period_4_DRP_1_5_False_count","Inorg_boolean_period_4_DRP_1_5_False_molarity","Inorg_boolean_period_4_DRP_1_5_True_count","Inorg_boolean_period_4_DRP_1_5_True_molarity","Inorg_boolean_period_5_DRP_1_5_any","Inorg_boolean_period_5_DRP_1_5_False_count","Inorg_boolean_period_5_DRP_1_5_False_molarity","Inorg_boolean_period_5_DRP_1_5_True_count","Inorg_boolean_period_5_DRP_1_5_True_molarity","Inorg_boolean_period_6_DRP_1_5_False_molarity","Inorg_boolean_period_7_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_10_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_11_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_12_DRP_1_5_any","Inorg_drpInorgAtom_boolean_group_12_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_13_DRP_1_5_any","Inorg_drpInorgAtom_boolean_group_13_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_group_13_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_13_DRP_1_5_True_count","Inorg_drpInorgAtom_boolean_group_13_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_group_14_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_15_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_16_DRP_1_5_any","Inorg_drpInorgAtom_boolean_group_16_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_group_16_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_16_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_group_17_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_18_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_1_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_2_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_3_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_4_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_5_DRP_1_5_any","Inorg_drpInorgAtom_boolean_group_5_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_group_5_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_5_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_group_6_DRP_1_5_any","Inorg_drpInorgAtom_boolean_group_6_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_group_6_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_7_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_8_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_group_9_DRP_1_5_any","Inorg_drpInorgAtom_boolean_group_9_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_period_1_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_period_2_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_period_3_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_period_4_DRP_1_5_any","Inorg_drpInorgAtom_boolean_period_4_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_period_4_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_period_4_DRP_1_5_True_count","Inorg_drpInorgAtom_boolean_period_4_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_period_5_DRP_1_5_any","Inorg_drpInorgAtom_boolean_period_5_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_period_5_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_period_5_DRP_1_5_True_count","Inorg_drpInorgAtom_boolean_period_5_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_period_6_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_period_7_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_0_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_1_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_2_DRP_1_5_any","Inorg_drpInorgAtom_boolean_valence_2_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_3_DRP_1_5_any","Inorg_drpInorgAtom_boolean_valence_3_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_valence_3_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_3_DRP_1_5_True_count","Inorg_drpInorgAtom_boolean_valence_3_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_valence_4_DRP_1_5_any","Inorg_drpInorgAtom_boolean_valence_4_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_5_DRP_1_5_any","Inorg_drpInorgAtom_boolean_valence_5_DRP_1_5_False_count","Inorg_drpInorgAtom_boolean_valence_5_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_5_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_valence_6_DRP_1_5_any","Inorg_drpInorgAtom_boolean_valence_6_DRP_1_5_False_molarity","Inorg_drpInorgAtom_boolean_valence_6_DRP_1_5_True_count","Inorg_drpInorgAtom_boolean_valence_6_DRP_1_5_True_molarity","Inorg_drpInorgAtom_boolean_valence_7_DRP_1_5_False_molarity","Inorg_drpInorgAtomAtomicRadius_geom_stoich_DRP_0_02_gmean_count","Inorg_drpInorgAtomAtomicRadius_geom_stoich_DRP_0_02_gmean_molarity","Inorg_drpInorgAtomAtomicRadius_geom_stoich_DRP_0_02_Max","Inorg_drpInorgAtomAtomicRadius_geom_stoich_DRP_0_02_Range","Inorg_drpInorgAtomAtomicRadius_geom_unw_DRP_0_02_gmean_count","Inorg_drpInorgAtomAtomicRadius_geom_unw_DRP_0_02_gmean_molarity","Inorg_drpInorgAtomAtomicRadius_geom_unw_DRP_0_02_Max","Inorg_drpInorgAtomAtomicRadius_geom_unw_DRP_0_02_Range","Inorg_drpInorgAtomAtomicRadius_max_DRP_0_02_gmean_count","Inorg_drpInorgAtomAtomicRadius_max_DRP_0_02_gmean_molarity","Inorg_drpInorgAtomAtomicRadius_max_DRP_0_02_Max","Inorg_drpInorgAtomAtomicRadius_max_DRP_0_02_Range","Inorg_drpInorgAtomElectronAffinity_geom_stoich_DRP_0_02_gmean_count","Inorg_drpInorgAtomElectronAffinity_geom_stoich_DRP_0_02_Max","Inorg_drpInorgAtomElectronAffinity_geom_stoich_DRP_0_02_Range","Inorg_drpInorgAtomElectronAffinity_geom_unw_DRP_0_02_gmean_count","Inorg_drpInorgAtomElectronAffinity_geom_unw_DRP_0_02_Max","Inorg_drpInorgAtomElectronAffinity_geom_unw_DRP_0_02_Range","Inorg_drpInorgAtomElectronAffinity_max_DRP_0_02_gmean_count","Inorg_drpInorgAtomElectronAffinity_max_DRP_0_02_Max","Inorg_drpInorgAtomElectronAffinity_max_DRP_0_02_Range","Inorg_drpInorgAtomHardness_geom_stoich_DRP_0_02_gmean_count","Inorg_drpInorgAtomHardness_geom_stoich_DRP_0_02_Max","Inorg_drpInorgAtomHardness_geom_stoich_DRP_0_02_Range","Inorg_drpInorgAtomHardness_geom_unw_DRP_0_02_gmean_count","Inorg_drpInorgAtomHardness_geom_unw_DRP_0_02_Max","Inorg_drpInorgAtomHardness_geom_unw_DRP_0_02_Range","Inorg_drpInorgAtomHardness_max_DRP_0_02_gmean_count","Inorg_drpInorgAtomHardness_max_DRP_0_02_Max","Inorg_drpInorgAtomHardness_max_DRP_0_02_Range","Inorg_drpInorgAtomIonizationEnergy_geom_stoich_DRP_0_02_gmean_count","Inorg_drpInorgAtomIonizationEnergy_geom_stoich_DRP_0_02_Max","Inorg_drpInorgAtomIonizationEnergy_geom_stoich_DRP_0_02_Range","Inorg_drpInorgAtomIonizationEnergy_geom_unw_DRP_0_02_gmean_count","Inorg_drpInorgAtomIonizationEnergy_geom_unw_DRP_0_02_Max","Inorg_drpInorgAtomIonizationEnergy_geom_unw_DRP_0_02_Range","Inorg_drpInorgAtomIonizationEnergy_max_DRP_0_02_gmean_count","Inorg_drpInorgAtomIonizationEnergy_max_DRP_0_02_Max","Inorg_drpInorgAtomIonizationEnergy_max_DRP_0_02_Range","Inorg_drpInorgAtomPaulingElectronegativity_geom_stoich_DRP_0_02_gmean_count","Inorg_drpInorgAtomPaulingElectronegativity_geom_stoich_DRP_0_02_Max","Inorg_drpInorgAtomPaulingElectronegativity_geom_stoich_DRP_0_02_Range","Inorg_drpInorgAtomPaulingElectronegativity_geom_unw_DRP_0_02_gmean_count","Inorg_drpInorgAtomPaulingElectronegativity_geom_unw_DRP_0_02_Max","Inorg_drpInorgAtomPaulingElectronegativity_geom_unw_DRP_0_02_Range","Inorg_drpInorgAtomPaulingElectronegativity_max_DRP_0_02_gmean_count","Inorg_drpInorgAtomPaulingElectronegativity_max_DRP_0_02_Max","Inorg_drpInorgAtomPaulingElectronegativity_max_DRP_0_02_Range","Inorg_drpInorgAtomPearsonElectronegativity_geom_stoich_DRP_0_02_gmean_count","Inorg_drpInorgAtomPearsonElectronegativity_geom_stoich_DRP_0_02_Max","Inorg_drpInorgAtomPearsonElectronegativity_geom_stoich_DRP_0_02_Range","Inorg_drpInorgAtomPearsonElectronegativity_geom_unw_DRP_0_02_gmean_count","Inorg_drpInorgAtomPearsonElectronegativity_geom_unw_DRP_0_02_Max","Inorg_drpInorgAtomPearsonElectronegativity_geom_unw_DRP_0_02_Range","Inorg_drpInorgAtomPearsonElectronegativity_max_DRP_0_02_gmean_count","Inorg_drpInorgAtomPearsonElectronegativity_max_DRP_0_02_Max","Inorg_drpInorgAtomPearsonElectronegativity_max_DRP_0_02_Range","Inorg_mw_DRP_rdkit_0_02_gmean_count","Inorg_mw_DRP_rdkit_0_02_gmean_molarity","Inorg_mw_DRP_rdkit_0_02_Max","Inorg_mw_DRP_rdkit_0_02_Range","K_mols","leak","Mo_mols","N_mols","Na_mols","O_mols","Org_amount_molarity","Org_boolean_group_10_DRP_1_5_False_molarity","Org_boolean_group_11_DRP_1_5_False_molarity","Org_boolean_group_12_DRP_1_5_False_molarity","Org_boolean_group_13_DRP_1_5_False_molarity","Org_boolean_group_14_DRP_1_5_True_molarity","Org_boolean_group_15_DRP_1_5_any","Org_boolean_group_15_DRP_1_5_False_count","Org_boolean_group_15_DRP_1_5_True_molarity","Org_boolean_group_16_DRP_1_5_any","Org_boolean_group_16_DRP_1_5_False_molarity","Org_boolean_group_17_DRP_1_5_any","Org_boolean_group_17_DRP_1_5_False_molarity","Org_boolean_group_18_DRP_1_5_False_molarity","Org_boolean_group_1_DRP_1_5_True_molarity","Org_boolean_group_2_DRP_1_5_False_molarity","Org_boolean_group_3_DRP_1_5_False_molarity","Org_boolean_group_4_DRP_1_5_False_molarity","Org_boolean_group_5_DRP_1_5_False_molarity","Org_boolean_group_6_DRP_1_5_False_molarity","Org_boolean_group_7_DRP_1_5_False_molarity","Org_boolean_group_8_DRP_1_5_False_molarity","Org_boolean_group_9_DRP_1_5_False_molarity","Org_boolean_period_1_DRP_1_5_True_molarity","Org_boolean_period_2_DRP_1_5_True_molarity","Org_boolean_period_3_DRP_1_5_any","Org_boolean_period_3_DRP_1_5_False_molarity","Org_boolean_period_4_DRP_1_5_any","Org_boolean_period_4_DRP_1_5_False_molarity","Org_boolean_period_5_DRP_1_5_False_molarity","Org_boolean_period_6_DRP_1_5_False_molarity","Org_boolean_period_7_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_10_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_11_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_12_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_13_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_14_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_15_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_16_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_17_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_18_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_1_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_2_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_3_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_4_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_5_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_6_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_7_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_8_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_group_9_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_period_1_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_period_2_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_period_3_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_period_4_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_period_5_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_period_6_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_period_7_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_0_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_1_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_2_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_3_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_4_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_5_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_6_DRP_1_5_False_molarity","Org_drpInorgAtom_boolean_valence_7_DRP_1_5_False_molarity","Org_mw_DRP_rdkit_0_02_gmean_count","Org_mw_DRP_rdkit_0_02_gmean_molarity","Org_mw_DRP_rdkit_0_02_Max","Ox_amount_count","Ox_amount_molarity","Ox_boolean_group_10_DRP_1_5_False_molarity","Ox_boolean_group_11_DRP_1_5_False_molarity","Ox_boolean_group_12_DRP_1_5_False_molarity","Ox_boolean_group_13_DRP_1_5_False_molarity","Ox_boolean_group_14_DRP_1_5_True_molarity","Ox_boolean_group_15_DRP_1_5_False_molarity","Ox_boolean_group_16_DRP_1_5_True_molarity","Ox_boolean_group_17_DRP_1_5_False_molarity","Ox_boolean_group_18_DRP_1_5_False_molarity","Ox_boolean_group_1_DRP_1_5_True_molarity","Ox_boolean_group_2_DRP_1_5_False_molarity","Ox_boolean_group_3_DRP_1_5_False_molarity","Ox_boolean_group_4_DRP_1_5_False_molarity","Ox_boolean_group_5_DRP_1_5_False_molarity","Ox_boolean_group_6_DRP_1_5_False_molarity","Ox_boolean_group_7_DRP_1_5_False_molarity","Ox_boolean_group_8_DRP_1_5_False_molarity","Ox_boolean_group_9_DRP_1_5_False_molarity","Ox_boolean_period_1_DRP_1_5_False_molarity","Ox_boolean_period_2_DRP_1_5_True_molarity","Ox_boolean_period_3_DRP_1_5_True_molarity","Ox_boolean_period_4_DRP_1_5_False_molarity","Ox_boolean_period_5_DRP_1_5_False_molarity","Ox_boolean_period_6_DRP_1_5_False_molarity","Ox_boolean_period_7_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_10_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_11_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_12_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_13_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_14_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_15_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_16_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_17_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_18_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_1_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_2_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_3_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_4_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_5_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_6_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_7_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_8_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_group_9_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_period_1_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_period_2_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_period_3_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_period_4_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_period_5_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_period_6_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_period_7_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_0_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_1_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_2_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_3_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_4_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_5_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_6_DRP_1_5_False_molarity","Ox_drpInorgAtom_boolean_valence_7_DRP_1_5_False_molarity","reaction_pH","reaction_temperature","reaction_time","Se_mols","slow_cool","Solv_amount_molarity","Solv_boolean_group_10_DRP_1_5_False_molarity","Solv_boolean_group_11_DRP_1_5_False_molarity","Solv_boolean_group_12_DRP_1_5_False_molarity","Solv_boolean_group_13_DRP_1_5_False_molarity","Solv_boolean_group_14_DRP_1_5_False_molarity","Solv_boolean_group_15_DRP_1_5_False_molarity","Solv_boolean_group_16_DRP_1_5_True_molarity","Solv_boolean_group_17_DRP_1_5_False_molarity","Solv_boolean_group_18_DRP_1_5_False_molarity","Solv_boolean_group_1_DRP_1_5_True_molarity","Solv_boolean_group_2_DRP_1_5_False_molarity","Solv_boolean_group_3_DRP_1_5_False_molarity","Solv_boolean_group_4_DRP_1_5_False_molarity","Solv_boolean_group_5_DRP_1_5_False_molarity","Solv_boolean_group_6_DRP_1_5_False_molarity","Solv_boolean_group_7_DRP_1_5_False_molarity","Solv_boolean_group_8_DRP_1_5_False_molarity","Solv_boolean_group_9_DRP_1_5_False_molarity","Solv_boolean_period_1_DRP_1_5_True_molarity","Solv_boolean_period_2_DRP_1_5_True_molarity","Solv_boolean_period_3_DRP_1_5_False_molarity","Solv_boolean_period_4_DRP_1_5_False_molarity","Solv_boolean_period_5_DRP_1_5_False_molarity","Solv_boolean_period_6_DRP_1_5_False_molarity","Solv_boolean_period_7_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_10_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_11_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_12_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_13_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_14_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_15_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_16_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_17_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_18_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_1_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_2_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_3_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_4_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_5_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_6_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_7_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_8_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_group_9_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_period_1_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_period_2_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_period_3_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_period_4_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_period_5_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_period_6_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_period_7_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_0_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_1_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_2_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_3_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_4_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_5_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_6_DRP_1_5_False_molarity","Solv_drpInorgAtom_boolean_valence_7_DRP_1_5_False_molarity","Te_mols","V_mols"]


## converting to csvHeaders 
csvheaders = [[i.csvHeader, i] for i in Descriptor.objects.filter(heading__in=rec_descs)]
csvheaders = [x[0] for x in csvheaders]
#print(csvheaders)

csvheaders = ['performedDateTime', 'performedBy', 'user', 'public', 'legacyRecommendedFlag', 'legacyRef', 'labBookPage', 'duplicateOf', 'recalculate', 'notes', 'legacyID', 'valid', 'dirty', 'id', 'insertedDateTime', 'convertedLegacyRef', 'reaction_ptr', 'calculating', 'recommendation', 'reference', 'labGroup'] + csvheaders


## writing to csv
import csv

# TODO: hard coded the latest version of the calculation software, need to update this automatically
formatted_headers = [header + "_DRP_0_02" for header in rec_descs]
toCSV = list(PerformedReaction.objects.all().rows(expanded=True, whitelist=['boolean_crystallisation_outcome_manual_0'] + formatted_headers))
print("toCSV", toCSV)
keys = list(toCSV[0].keys()) + ['boolean_crystallisation_outcome_manual_0']
print(keys)
with open('DRP_descriptors_6_26_18.csv', 'w') as output_file:
    dict_writer = csv.DictWriter(output_file, keys, extrasaction='ignore')
    dict_writer.writeheader()
    dict_writer.writerows(toCSV)